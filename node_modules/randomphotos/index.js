import { fetchQuotes } from 'randomquotesbyanton';

function getRandomQuote(quotes) {
  const randomIndex = Math.floor(Math.random() * quotes.length);
  return quotes[randomIndex];
}

async function randomCatsWithQuote() {
  try {
    const [quotes, response] = await Promise.all([fetchQuotes(), fetch('https://cataas.com/cat')]);
    const blob = await response.blob();
    const catUrl = URL.createObjectURL(blob);
    const randomQuote = getRandomQuote(quotes);

    return {
      quote: randomQuote.text,
      author: randomQuote.author,
      catUrl: catUrl
    };
  } catch (error) {
    console.error(error);
  }
}

export { randomCatsWithQuote };
